<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Nats1 | Mooner</title>
<meta name="keywords" content="nats, MSA" />
<meta name="description" content="Desc Text.">
<meta name="author" content="">
<link rel="canonical" href="https://palza4dev.github.io/post/nats1/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css" integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js" integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://palza4dev.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://palza4dev.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://palza4dev.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://palza4dev.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://palza4dev.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T68TSV1RG4"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-T68TSV1RG4', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Nats1" />
<meta property="og:description" content="Desc Text." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://palza4dev.github.io/post/nats1/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-04-08T18:24:08&#43;09:00" />
<meta property="article:modified_time" content="2022-04-08T18:24:08&#43;09:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Nats1"/>
<meta name="twitter:description" content="Desc Text."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://palza4dev.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Nats1",
      "item": "https://palza4dev.github.io/post/nats1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Nats1",
  "name": "Nats1",
  "description": "Desc Text.",
  "keywords": [
    "nats", "MSA"
  ],
  "articleBody": "NATS 개요  분산형 시스템을 위한 연결 기술 → “Message oriented middleware” 메시지 주소지정, 검색, 교환 등의 기능 질문과 답변, 명령문 작성과 실행, 스트림 프로세스 처리 등에 사용  NATS 특징  손쉬운 다대다 연결  hostname이나 port가 아니라 subject 기준으로 관리한다. load balancers, log systems 부터 proxies and sidecars 까지 1:1 연결에는 한계가 있다.   배포 용이성  VM, container, K8S, device 등 어느 환경에서도 배포 가능   안전성  보안을 위한 네트워크 경계 지정을 안해도 될 만큼 안전함   높은 확장성, 하이브리드 배포, 적응성 Use Cases  Cloud Messaging  Services (microservices, service mesh) Event/Data Streaming (observability, analytics, ML/AI)   Command and Control  IoT and Edge Telemetry / Sensor Data / Command and Control   레거시 메시징 시스템의 확장 및 교체    NATS란?  NATS Client Applications  NATS 클라이언트 라이브러리를 사용해 다른 app과 pub\u0026sub, 요청\u0026응답을 수행할 수 있다. NATS 서버 관점에선 클라이언트인 것이다.   NATS client와 NATS server 연결하기  연결하기 위한 config  NATS 서버의 URL Authentication(필요시) : Token, TLS, user/pass 등 다양한 방식     Simple messaging design  메시지는 subject에 의해 주소 지정되고 식별된다. (네트워크 위치와 무관) 퍼블리셔는 데이터를 인코딩해 전달하며 구독자는 받아서 디코딩한다.   Quality of Service (메시지 품질 관리)  Core만 사용하는지, JetStream도 사용하는지에 따라 다르다. Core NATS → At most once QoS(최대 한번)  구독자가 Topic에 연결된 상태라면 메시지가 수신되지만 그렇지 않은 경우 (나중에) 메시지를 수신 할 수 없다. TCP/IP 수준의 보증이다. fire-and-forget 메시징 시스템으로 메모리에만 저장하고 disk 저장안함   NATS JetStream → At-least(한번이상) / exactly once(정확히 한번)  최소 한번 또는 정확하게 한번 → 메시지에 대한 더 높은 품질이 필요할때 지속적인 스트리밍, 플로우 제어, 키-값 스토어 등 기능이 필요할때 (JetStream은 NATS 서버에 내장되어 있음)      Subject-Based Messaging  Subject란?  publisher와 subscriber가 서로를 찾을 수 있게 해주는 문자열 (주소 식별) 메시지를 스트림 혹은 토픽으로 분류해준다. 알파벳 대소문자, . , * ,  사용 가능 . 으로 계층 표현, * 은 싱글 토큰 매칭,  은 멀티플 토큰 매칭    Core NATS  Publish-Subscribe (일대다 통신)  publisher는 subject에 메시지를 송신 해당 subject를 리스닝하고 있는 subscriber는 액티브하게 메시지를 수신 메시지 구성 (기본 1MB, 최대 64MB, 적정최대 8MB)  A subject. A payload in the form of a byte array. Any number of header fields. An optional ‘reply’ address field.      ",
  "wordCount" : "334",
  "inLanguage": "en",
  "datePublished": "2022-04-08T18:24:08+09:00",
  "dateModified": "2022-04-08T18:24:08+09:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://palza4dev.github.io/post/nats1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mooner",
    "logo": {
      "@type": "ImageObject",
      "url": "https://palza4dev.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://palza4dev.github.io/" accesskey="h" title="Mooner (Alt + H)">Mooner</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://palza4dev.github.io/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://palza4dev.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://palza4dev.github.io/series/" title="Series">
                    <span>Series</span>
                </a>
            </li>
            <li>
                <a href="https://palza4dev.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://palza4dev.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Nats1
    </h1>
    <div class="post-description">
      Desc Text.
    </div>
    <div class="post-meta"><span title='2022-04-08 18:24:08 +0900 KST'>April 8, 2022</span>&nbsp;·&nbsp;2 min

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#nats-%ea%b0%9c%ec%9a%94" aria-label="NATS 개요">NATS 개요</a></li>
                <li>
                    <a href="#nats-%ed%8a%b9%ec%a7%95" aria-label="NATS 특징">NATS 특징</a></li>
                <li>
                    <a href="#nats%eb%9e%80" aria-label="NATS란?">NATS란?</a></li>
                <li>
                    <a href="#subject-based-messaging" aria-label="Subject-Based Messaging">Subject-Based Messaging</a></li>
                <li>
                    <a href="#core-nats" aria-label="Core NATS">Core NATS</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="nats-개요">NATS 개요<a hidden class="anchor" aria-hidden="true" href="#nats-개요">#</a></h3>
<ul>
<li>분산형 시스템을 위한 연결 기술 → “Message oriented middleware”</li>
<li>메시지 주소지정, 검색, 교환 등의 기능</li>
<li>질문과 답변, 명령문 작성과 실행, 스트림 프로세스 처리 등에 사용</li>
</ul>
<h3 id="nats-특징">NATS 특징<a hidden class="anchor" aria-hidden="true" href="#nats-특징">#</a></h3>
<ul>
<li>손쉬운 다대다 연결
<ul>
<li>hostname이나 port가 아니라 subject 기준으로 관리한다.</li>
<li>load balancers, log systems 부터 proxies and sidecars 까지 1:1 연결에는 한계가 있다.</li>
</ul>
</li>
<li>배포 용이성
<ul>
<li>VM, container, K8S, device 등 어느 환경에서도 배포 가능</li>
</ul>
</li>
<li>안전성
<ul>
<li>보안을 위한 네트워크 경계 지정을 안해도 될 만큼 안전함</li>
</ul>
</li>
<li>높은 확장성, 하이브리드 배포, 적응성</li>
<li><strong>Use Cases</strong>
<ul>
<li>Cloud Messaging
<ul>
<li>Services (microservices, service mesh)</li>
<li>Event/Data Streaming (observability, analytics, ML/AI)</li>
</ul>
</li>
<li>Command and Control
<ul>
<li>IoT and Edge</li>
<li>Telemetry / Sensor Data / Command and Control</li>
</ul>
</li>
<li>레거시 메시징 시스템의 확장 및 교체</li>
</ul>
</li>
</ul>
<h3 id="nats란">NATS란?<a hidden class="anchor" aria-hidden="true" href="#nats란">#</a></h3>
<ul>
<li><strong>NATS Client Applications</strong>
<ul>
<li>NATS 클라이언트 라이브러리를 사용해 다른 app과 pub&amp;sub, 요청&amp;응답을 수행할 수 있다.</li>
<li>NATS 서버 관점에선 클라이언트인 것이다.</li>
</ul>
</li>
<li><strong>NATS client와 NATS server 연결하기</strong>
<ul>
<li>연결하기 위한 config
<ul>
<li>NATS 서버의 URL</li>
<li>Authentication(필요시) : Token, TLS, user/pass 등 다양한 방식</li>
</ul>
</li>
</ul>
</li>
<li><strong>Simple messaging design</strong>
<ul>
<li>메시지는 subject에 의해 주소 지정되고 식별된다. (네트워크 위치와 무관)</li>
<li>퍼블리셔는 데이터를 인코딩해 전달하며 구독자는 받아서 디코딩한다.</li>
</ul>
</li>
<li><strong>Quality of Service (메시지 품질 관리)</strong>
<ul>
<li>Core만 사용하는지, JetStream도 사용하는지에 따라 다르다.</li>
<li><strong>Core NATS → At most once QoS(최대 한번)</strong>
<ul>
<li>구독자가 Topic에 연결된 상태라면 메시지가 수신되지만 그렇지 않은 경우 (나중에) 메시지를 수신 할 수 없다.</li>
<li>TCP/IP 수준의 보증이다.</li>
<li>fire-and-forget 메시징 시스템으로 메모리에만 저장하고 disk 저장안함</li>
</ul>
</li>
<li><strong>NATS JetStream → At-least(한번이상) / exactly once(정확히 한번)</strong>
<ul>
<li>최소 한번 또는 정확하게 한번 → 메시지에 대한 더 높은 품질이 필요할때</li>
<li>지속적인 스트리밍, 플로우 제어, 키-값 스토어 등 기능이 필요할때</li>
<li>(JetStream은 NATS 서버에 내장되어 있음)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="subject-based-messaging">Subject-Based Messaging<a hidden class="anchor" aria-hidden="true" href="#subject-based-messaging">#</a></h3>
<ul>
<li><strong>Subject란?</strong>
<ul>
<li>publisher와 subscriber가 서로를 찾을 수 있게 해주는 문자열 (주소 식별)</li>
<li>메시지를 스트림 혹은 토픽으로 분류해준다.</li>
<li>알파벳 대소문자, <code>.</code> , <code>*</code> , <code>&gt;</code> 사용 가능</li>
<li><code>.</code> 으로 계층 표현, <code>*</code> 은 싱글 토큰 매칭, <code>&gt;</code> 은 멀티플 토큰 매칭</li>
</ul>
</li>
</ul>
<h3 id="core-nats">Core NATS<a hidden class="anchor" aria-hidden="true" href="#core-nats">#</a></h3>
<ul>
<li><strong>Publish-Subscribe (일대다 통신)</strong>
<ul>
<li>publisher는 subject에 메시지를 송신</li>
<li>해당 subject를 리스닝하고 있는 subscriber는 액티브하게 메시지를 수신</li>
<li>메시지 구성 (기본 1MB, 최대 64MB, 적정최대 8MB)
<ol>
<li>A subject.</li>
<li>A payload in the form of a byte array.</li>
<li>Any number of header fields.</li>
<li>An optional &lsquo;reply&rsquo; address field.</li>
</ol>
</li>
</ul>
</li>
</ul>


  </div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://palza4dev.github.io/tags/nats/">nats</a></li>
      <li><a href="https://palza4dev.github.io/tags/msa/">MSA</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://palza4dev.github.io/post/test3/">
    <span class="title">Next Page »</span>
    <br>
    <span>마지막 서치 테스트 및 486</span>
  </a>
</nav>

  </footer><div id="disqus_thread"></div>
<script>
    

    

    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://devblog-gdzaz0odmp.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://palza4dev.github.io/">Mooner</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
